apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: pomerium
  namespace: argocd
spec:
  project: default
  source:
    repoURL: 'https://helm.pomerium.io'
    targetRevision: 34.0.1
    chart: pomerium
    helm:
      values: |
       
      authenticate:
          url: "https://authenticate.pomerium.localhost"

       
      config:
        sharedSecret: "773upQ28x9uCPONQ0Tj4SFK/AHkdbLxbPnVABD5nJ4I="
        cookieSecret: "yrM9nrsnP1R13L/jpV4goWak/bc+YpAGxlcbj/nZCXg="

        
      proxy:
        service:
        type: ClusterIP

  destination:
    server: 'https://kubernetes.default.svc'
    namespace: 'pomerium' 
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
    - CreateNamespace=true
